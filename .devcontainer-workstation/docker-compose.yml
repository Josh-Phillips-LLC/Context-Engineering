services:
  agent-workstation:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: agent-workstation
    volumes:
      - projects_data:/workspace/Projects
      - gh_config:/root/.config/gh
      - git_config:/root/.config/git
      - codex_home:/root/.codex
    environment:
      - GH_TOKEN=${GH_TOKEN}
      - OPENAI_API_KEY=${OPENAI_API_KEY}
      - CODEX_HOME=/root/.codex

    # Testing-mode autonomy
    cap_add:
      - ALL
    privileged: true
    init: true
    command: sleep infinity

volumes:
  projects_data:
  gh_config:
  git_config:
  codex_home:
